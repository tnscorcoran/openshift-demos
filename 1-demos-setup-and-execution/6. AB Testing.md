### Assumptions / Notes I made. Correct as appropriate for your setup
- developer user has credentials developer:developer
- admin user has credentials system:admin
- Using a self signed cert which requires relaxing security stringencies (--insecure-skip-tls-verify)
- I use my names for projects and apps - you probably want to name your differently
- Open JDK image streams are already available. If not run this as admin: 
  - oc create -f ./openjdk-s2i-imagestream.json -n openshift
- Substitute your routes/URLS for my example ones
- Some commands are deprecated. These will be fioxed ina future release
- This example is taken from the excellent e-book *Devops with Openshift* available for free download at https://www.openshift.com/devops-with-openshift/. Check it out!

### Steps
- **_Create Projects_**  
  - oc login https://your-openshift-host -u developer -p developer --insecure-skip-tls-verify
  - oc new-project cotd --display-name='A/B Deployment Example' --description='A/B Deployment Example'
- **_Create and test apps_**  
  - oc new-app --name='cats' -l name='cats' openshift/php:5.6~https://github.com/tnscorcoran/cotd.git -e SELECTOR=cats
  - oc expose service cats --name=cats -l name='cats'
  - oc new-app --name='city' -l name='city' openshift/php:5.6~https://github.com/tnscorcoran/cotd.git -e SELECTOR=cities
  - oc expose service city --name=city -l name='city'
  - oc expose service cats --name='ab' -l name='ab'
  - oc annotate route/ab haproxy.router.openshift.io/balance=roundrobin
  - oc set route-backends ab cats=100 city=0
- **_On the Openshift web console, open your route configuration page: Choose menu item Applications -> Routes -> ab_**  
- **_You see it's split 100% cats, 0% cities_**  
- **_You can't test a split route using a browser because the Openshift router will associate one with your cookie_**  
- **_So test it using curl - the 3rd URL path fragment is the determining result_** 
  - for i in {1..10}; do curl -s http://ab-cotd.apps.02f2.example.opentlc.com/item.php | grep "data/images/.*" | awk '{print $5}'; done 
- **_Add 20% to cities and test_** 
  - oc set route-backends ab --adjust city=+20%
  - for i in {1..10}; do curl -s http://ab-cotd.apps.02f2.example.opentlc.com/item.php | grep "data/images/.*" | awk '{print $5}'; done 
